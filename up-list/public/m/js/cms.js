'use strict';var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();(function(){var $$=mdui.JQ;$$('#back-to-index').remove();$$('body').removeClass('mdui-drawer-body-left');var app=new Vue({el:'#app',data:{cards:[],searchInput:'',currentServer:3,isReadingDetail:false},computed:{filteredCards:function filteredCards(){var _this=this;if(this.searchInput==='')return this.cards;return this.cards.filter(function(item){for(var i in item){if(item[i].indexOf(_this.searchInput)!==-1)return true}return false})}},methods:{changeServer:function changeServer(){var server=arguments.length>0&&arguments[0]!==undefined?arguments[0]:3;showLoading();$$('.servers').removeClass('mdui-tab-active');var self=this;axios.get('/cms/data/'+server).then(function(res){self.cards=data2array(res.data);$$('#server-'+server).addClass('mdui-tab-active');self.currentServer=server;mdui.mutation();self.backToTop();hideLoading()})},read:function read(tid){showLoading();var dialog=new mdui.Dialog($$('#dialog'));axios.get('/cms/'+this.currentServer+'/'+tid,{responseType:'document'}).then(function(res){if(res.data&&res.data.body){$$('#dialog-content').empty().append(res.data.body.children)}}).catch(function(e){$$('#dialog-content').empty().append(e.message?e.message:e)}).then(function(_){dialog.open();hideLoading()})},backToTop:function backToTop(){document.body.scrollTop=0;document.documentElement.scrollTop=0}},created:function created(){this.changeServer()},mounted:function mounted(){mdui.mutation();$$('.cards').css('display','block')}});function data2array(json){var arr=[];for(var key in json){if(key.indexOf('-')===-1)key='0101-'+key;var _key$split=key.split('-'),_key$split2=_slicedToArray(_key$split,2),date=_key$split2[0],id=_key$split2[1];date=date.substr(0,2)+'-'+date.substr(2);arr.push({id:id,date:date,key:key,title:json[key]})}return arr.sort(function(a,b){return b.id-a.id})}function showLoading(){$$('#progress').css('opacity',1)}function hideLoading(){$$('#progress').css('opacity',0)}})();