(function(t){function e(e){for(var n,c,o=e[0],r=e[1],u=e[2],d=0,m=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&m.push(a[c][0]),a[c]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);l&&l(e);while(m.length)m.shift()();return s.push.apply(s,u||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,o=1;o<i.length;o++){var r=i[o];0!==a[r]&&(n=!1)}n&&(s.splice(e--,1),t=c(c.s=i[0]))}return t}var n={},a={app:0},s=[];function c(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.m=t,c.c=n,c.d=function(t,e,i){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(i,n,function(e){return t[e]}.bind(null,n));return i},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/m/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=r;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var n=i("85ec"),a=i.n(n);a.a},"2e41":function(t,e,i){},"3b43":function(t,e,i){"use strict";var n=i("2e41"),a=i.n(n);a.a},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("SpineHeader"),i("ServiceCheck"),i("MiscList",{attrs:{miscmap:t.miscmap},on:{"load-complete":t.showMisc}}),i("MiscShow",{attrs:{"misc-data":t.miscData,miscmap:t.miscmap}})],1)},s=[],c=i("bc3a"),o=i.n(c),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",[i("div",{staticClass:"mdui-appbar mdui-appbar-fixed"},[i("div",{staticClass:"mdui-toolbar mdui-color-theme"},[t._m(0),i("div",{staticClass:"mdui-typo-title"},[t._v(t._s(t.title))]),i("div",{staticClass:"mdui-toolbar-spacer"}),i("img",{staticClass:"favicon",attrs:{src:"/images/favicon-r.png"}})])])])},u=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"mdui-btn mdui-btn-icon mdui-ripple mdui-ripple-white",attrs:{href:"/"}},[i("i",{staticClass:"mdui-icon material-icons"},[t._v("home")])])}],l={name:"SpineHeader",data:function(){return{title:"动态看板查看器",loading:!0}},methods:{}},d=l,m=(i("771b"),i("2877")),p=Object(m["a"])(d,r,u,!1,null,"2d656b98",null),f=p.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mdui-container mdui-p-t-2",attrs:{id:"service-check"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isActive,expression:"!isActive"}],staticClass:"mdui-text-color-red mdui-m-t-2"},[t._v("尚未安装或启用搞事学园代理服务，或您的设备不支持代理服务，无法使用动态看板查看器")]),i("button",{staticClass:"mdui-btn mdui-shadow-1 mdui-m-t-2 mdui-ripple",on:{click:t.openDialog}},[t._v("使用说明")]),i("div",{staticClass:"mdui-dialog",attrs:{id:"about-dialog"}},[t._m(0),i("div",{staticClass:"mdui-dialog-content"},[i("div",{staticClass:"mdui-typo"},[t._m(1),i("p",{staticClass:"mdui-text-color-red"},[t._v("单个看板的体积约在 1MB ~ 5MB 大小，请注意流量消耗。")]),i("p",[t._v("搞事学园代理服务的安装方法如下：")]),t._m(2),i("p",[t._v("当前搞事学园代理服务的运行状况：")]),t.isActive?i("div",{staticClass:"detail mdui-container"},[i("p",[t._v("版本号： "+t._s(t.agentVer))]),i("p",[t._v("已下载的数据大小： "+t._s(t.occupancy))]),i("button",{staticClass:"mdui-btn mdui-ripple mdui-shadow-1 mdui-color-red",on:{click:t.clearService}},[t._v("点击删除数据")]),i("span",{staticClass:"mdui-m-l-2 mdui-text-color-red"},[t._v("(删除数据会降低加载速度，并且可能消耗更多流量，请谨慎使用)")]),i("br"),i("button",{staticClass:"mdui-btn mdui-ripple mdui-shadow-1 mdui-m-t-1",on:{click:t.stopService}},[t._v("点击停止服务")]),i("span",{staticClass:"mdui-m-l-2"},[t._v("(停止运行后请刷新页面)")])]):i("div",{staticClass:"inactive mdui-container"},[i("p",[t._v("未安装或未运行")]),i("button",{staticClass:"mdui-btn mdui-ripple mdui-shadow-1",on:{click:t.startService}},[t._v("点击运行服务")]),i("span",{staticClass:"mdui-m-l-2"},[t._v("(运行后请刷新页面)")])])])]),i("div",{staticClass:"mdui-dialog-actions"},[i("button",{staticClass:"mdui-btn mdui-shadow-1 mdui-ripple",on:{click:t.closeDialog}},[i("a",{staticClass:"mdui-icon material-icons"},[t._v("close")])])])])])},h=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mdui-dialog-title"},[t._v("关于搞事学园代理服务"),i("div",{staticClass:"mdui-card-primary-subtitle"},[t._v("技术支持： 夹卡酱")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("动态看板查看器可在本地下载、解包后预览动态看板，需先安装"),i("b",[t._v("搞事学园代理服务")]),t._v("后使用，由于跨域问题目前仅支持在新域名 (https://redbean.tech) 上使用。")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mdui-panel mdui-panel-gapless mdui-m-b-2",attrs:{"mdui-panel":""}},[i("div",{staticClass:"mdui-panel-item"},[i("div",{staticClass:"mdui-panel-item-header"},[i("div",{staticClass:"mdui-panel-item-title"},[t._v("Windows"),i("b",{staticClass:"mdui-text-color-green"},[t._v(" (推荐)")])]),i("i",{staticClass:"mdui-icon material-icons mdui-panel-item-arrow"},[t._v("keyboard_arrow_down")])]),i("div",{staticClass:"mdui-panel-item-body"},[i("p",[t._v("点击 "),i("a",{attrs:{href:"https://pan.baidu.com/s/1E4Db_H-3tPQu8lyIDfx3aQ",target:"_blank"}},[t._v(" 这个链接"),i("i",{staticClass:"mdui-icon material-icons"},[t._v("open_in_new")])]),t._v(" （提取码: sfad）下载并安装即可。")]),i("p",[t._v("或复制以下链接后访问： "),i("u",[t._v("https://pan.baidu.com/s/1E4Db_H-3tPQu8lyIDfx3aQ")])])])]),i("div",{staticClass:"mdui-panel-item"},[i("div",{staticClass:"mdui-panel-item-header"},[i("div",{staticClass:"mdui-panel-item-title"},[t._v("安卓")]),i("i",{staticClass:"mdui-icon material-icons mdui-panel-item-arrow"},[t._v("keyboard_arrow_down")])]),i("div",{staticClass:"mdui-panel-item-body"},[i("p",[t._v("开发中，敬请期待")])])])])}],g={name:"ServiceCheck",data:function(){return{isActive:!1,agentVer:"",occupancy:"",dialogInstance:null}},methods:{openDialog:function(){var t=this;o.a.get("http://127.0.0.1:8787/occupancy").then((function(e){var i=e.data;t.occupancy=i.msg})),this.dialogInstance.open()},closeDialog:function(){this.dialogInstance.close()},startService:function(){window.open("gaoshixueyuanagent://start","_self")},stopService:function(){window.open("gaoshixueyuanagent://stop","_self")},clearService:function(){var t=this;o.a.get("http://127.0.0.1:8787/clear").then((function(e){var i=e.data;t.closeDialog(),window.mdui.alert("删除了".concat(i.msg,"数据"),(function(){t.openDialog()}),{history:!1})}))}},mounted:function(){var t=this;o.a.get("http://127.0.0.1:8787/ver").then((function(e){e&&(t.isActive=!0,t.agentVer=e.data.msg)})).catch((function(){t.isActive=!1})),this.dialogInstance=new window.mdui.Dialog("#about-dialog",{history:!1}),window.mdui.mutation("#about-dialog")}},b=g,_=(i("9d32"),Object(m["a"])(b,v,h,!1,null,null,null)),w=_.exports,C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mdui-container mdui-p-t-2",attrs:{id:"misc-list"}},[i("div",{staticClass:"selector"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedMisc,expression:"selectedMisc"}],staticClass:"mdui-select",on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedMisc=e.target.multiple?i:i[0]},t.changeMisc]}},[i("option",{attrs:{selected:"",disabled:""},domProps:{value:-1}},[t._v("(请选择看板)")]),t._l(t.miscshows,(function(e,n){return t.miscmap[e.id]?i("option",{domProps:{value:n}},[t._v(t._s(t.miscmap[e.id]?t.miscmap[e.id].name:e.skel.replace(".json","")))]):t._e()}))],2),i("span",{staticClass:"display-message mdui-m-l-2"},[t._v(t._s(t.displayMessage))])])])},y=[],x=(i("99af"),i("a15b"),i("d3b7"),i("2909")),M=(i("96cf"),function t(){var e,i,n=arguments;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}))},i=n.length>1?n[1]:void 0,a.next=4,regeneratorRuntime.awrap(e());case 4:if(!a.sent){a.next=8;break}return a.abrupt("return",i());case 8:return a.abrupt("return",requestAnimationFrame((function(){return t(e,i)})));case 9:case"end":return a.stop()}}))}),A=function(){var t,e,i=arguments;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:function(){},e=i.length>1&&void 0!==i[1]?i[1]:function(){},n.abrupt("return",requestAnimationFrame((function(){return M(t,e)})));case 3:case"end":return n.stop()}}))},k=A,j={name:"MiscList",props:["miscmap"],data:function(){return{miscshows:[],selectedMisc:"-1",currentTask:-1,displayMessage:""}},methods:{changeMisc:function(){var t,e,i,n,a=this;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return t=this.miscshows[this.selectedMisc],s.next=3,regeneratorRuntime.awrap(o.a.get("http://127.0.0.1:8787/exists?bundleCrc=".concat(t.CRC,"&files=").concat([].concat(Object(x["a"])(t.pngs),[t.atlas,t.skel]).join(","))));case 3:if(e=s.sent,0!==e.data.retcode){s.next=6;break}return s.abrupt("return",this.$emit("load-complete",t));case 6:i="https://assets.hsod2.benghuai.com/asset_bundle/6_8/original/android_compressed/",n=encodeURIComponent("".concat(i).concat(t.bundleName,"_").concat(t.CRC)),o.a.get("http://127.0.0.1:8787/mount?url=".concat(n)).then((function(e){var i=e.data;i.msg&&(a.currentTask=i.msg);var n=a;k((function(){var t,e;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(o.a.get("http://127.0.0.1:8787/iscomplete?taskid=".concat(n.currentTask)));case 2:return t=i.sent,e=t.data,n.displayMessage="正在加载资源......".concat(e.msg,"%"),i.abrupt("return",e.msg>=100);case 6:case"end":return i.stop()}}))}),(function(){n.displayMessage="",a.$emit("load-complete",t)}))})).catch((function(){a.displayMessage="载入错误"}));case 9:case"end":return s.stop()}}),null,this)}},mounted:function(){var t=this;o.a.get("miscshows.json").then((function(e){var i=e.data;t.miscshows=i}))}},S=j,O=(i("8acd"),Object(m["a"])(S,C,y,!1,null,null,null)),R=O.exports,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"misc-show"}},[i("div",{staticClass:"selector mdui-container"},[t.animations instanceof Array?t._e():i("select",{directives:[{name:"model",rawName:"v-model",value:t.currentAnimation,expression:"currentAnimation"}],staticClass:"mdui-select",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentAnimation=e.target.multiple?i:i[0]}}},[i("option",{attrs:{selected:"",value:"",disabled:""}},[t._v("(请选择动画)")]),t._l(t.animations,(function(e,n){return i("option",{domProps:{value:n}},[t._v(t._s(n))])}))],2),i("span",{staticClass:"display-message mdui-m-l-2"},[t._v(t._s(t.displayMessage))])]),i("div",{staticClass:"mdui-m-t-4",attrs:{id:"spine-widget"}})])},P=[],$=(i("a9e3"),i("b64b"),{props:["miscData","miscmap"],data:function(){return{animations:[],currentAnimation:"",displayMessage:"",widgetInstance:null,misc:{},scale:1,offsetX:0,offsetY:0,sizeX:0,sizeY:0,bounds:null}},mounted:function(){window.mdui.mutation()},methods:{loadMiscShow:function(t){var e=this;this.currentAnimation="",this.displayMessage="正在导入动画列表...",this.animations=[],this.misc=t,o.a.get("http://127.0.0.1:8787/".concat(t.CRC,"/").concat(t.skel)).then((function(t){e.animations=t.data.animations,window.skel=t.data;var i=Object.keys(e.animations).length;e.displayMessage="导入了 ".concat(i," 个动画"),"idle"in e.animations?e.currentAnimation="idle":e.currentAnimation=Object.keys(e.animations)[0]})).catch((function(){e.displayMessage="读取动画失败，该看板可能暂时无法预览",e.animations=[]}))},showAnimation:function(t){if(""!==t){var e=this,i={json:"http://127.0.0.1:8787/".concat(this.misc.CRC,"/").concat(this.misc.skel),atlas:"http://127.0.0.1:8787/".concat(this.misc.CRC,"/").concat(this.misc.atlas),animation:t,backgroundColor:"#00000000",debug:!1,scale:Number(this.scale),fix:{offset:{x:-Number(this.offsetX),y:-Number(this.offsetY)},size:{x:-Number(this.sizeX),y:-Number(this.sizeY)}},premultipliedAlpha:!0,atlasPages:this.misc.pngs,success:function(){},error:function(){e.displayMessage="加载素材失败，请重试"}};this.bounds&&(i.bounds=this.bounds),this.widgetInstance=new window.spine.SpineWidget("spine-widget",i),window.widgetInstance=this.widgetInstance}}},watch:{miscData:function(t,e){if(this.miscmap[t.id]){var i=this.miscmap[t.id];this.offsetX=i.offsetX,this.offsetY=i.offsetY,this.sizeX=i.sizeX,this.sizeY=i.sizeY,this.bounds=i.bounds||null}t.CRC&&t.CRC!==e.CRC&&this.loadMiscShow(t)},currentAnimation:function(t){""!==t&&this.showAnimation(t)},offsetX:function(){this.showAnimation(this.currentAnimation)},offsetY:function(){this.showAnimation(this.currentAnimation)},sizeX:function(){this.showAnimation(this.currentAnimation)},sizeY:function(){this.showAnimation(this.currentAnimation)}}}),z=$,E=(i("3b43"),Object(m["a"])(z,D,P,!1,null,null,null)),I=E.exports,X={name:"app",data:function(){return{miscData:{},miscmap:{}}},components:{SpineHeader:f,ServiceCheck:w,MiscList:R,MiscShow:I},methods:{showMisc:function(t){this.miscData=t}},mounted:function(){var t=this;window.mdui.JQ("body").removeClass("mdui-appbar-with-toolbar"),o.a.get("miscmap.json").then((function(e){t.$set(t,"miscmap",e.data)}))}},Y=X,N=(i("034f"),Object(m["a"])(Y,a,s,!1,null,null,null)),T=N.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(T)}}).$mount("#app")},"5ac7":function(t,e,i){},"771b":function(t,e,i){"use strict";var n=i("d8dc"),a=i.n(n);a.a},"85ec":function(t,e,i){},"8acd":function(t,e,i){"use strict";var n=i("5ac7"),a=i.n(n);a.a},"9d32":function(t,e,i){"use strict";var n=i("f797"),a=i.n(n);a.a},d8dc:function(t,e,i){},f797:function(t,e,i){}});