(()=>{"use strict";function e(){n("#faction-score").classList.add("loading"),(new t).get("/worldbattle/20182/last",(e,t)=>{e&&console.error(e);let r=JSON.parse(t);const s=r.round.length?"凉凉":"筹备中";Array.prototype.forEach.call(n(".faction"),(e,t)=>{n(".line",e)[0].innerText=r.top[t],n(".score",e)[0].innerText=r.round.length&&null!==r.round[t]?r.round[t]:s}),n("#faction-score").classList.remove("loading")},!0)}function t(){this.get=function(e,t,n){let r=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){return new ActiveXObject("Msxml2.XMLHTTP.3.0")}}();r.open("GET",e,n),r.onreadystatechange=(()=>{4===r.readyState&&200===r.status&&t(null,r.response)}),r.send(null)}}function n(e,t=document){if("string"!=typeof e)throw new Error(`Type Error: ${e} is not a string`);switch(e[0]){case"#":return t.getElementById(e.substring(1));case".":return t.getElementsByClassName(e.substring(1));default:return t.getElementsByTagName(e)}}document.addEventListener("readystatechange",()=>{if("complete"===document.readyState){let t=n("#iframe-container"),r=n("#iframe"),s=n(".page-button");Array.prototype.forEach.call(s,e=>{e.onclick=(e=>{let n=e.target.getAttribute("src");Array.prototype.forEach.call(s,e=>{e.classList.remove("focus")}),e.target.classList.add("focus"),r.src=n,t.style.display="block"})}),n("#iframe-hide").onclick=(e=>{t.style.display="none",r.src="",n(".focus")[0].classList.remove("focus")});let o=n("#fw-refresh");o.onclick=e;let c=n("#toggle-fw");c.onclick=(e=>{n("#faction-body").classList.toggle("hide"),c.innerText="-"===c.innerText?"+":"-"}),o.click()}})})();